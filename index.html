<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Hello, world!</title>
  </head>
  <body class="container-fluid">
    <div class="card">
        <div class="card-body text-center">
          <h1>Timer's Report</h1>
          <hr />
          <div class="row">
            <div class="col">
              <form id="timer-form">
                <div class="row mb-3 meeting">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" value="Club Meeting">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="meetingButton">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 business">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" value="Business Session">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="business-sessionButton">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 education">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" value="Education Session">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="business-sessionButton">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 tableTopics">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" id="tableTopics" value="Table Topics">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="tableTopics">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp1">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="1st Speaker">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp1Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp2">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" id="sp2" placeholder="2nd Speaker">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp2Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp3">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="3rd Speaker">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp3Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp4">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="4th Speaker">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp4Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp1e">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="1st Speaker Evaluation">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp1Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp2e">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" id="sp2" placeholder="2nd Speaker Evaluation">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp2Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp3e">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="3rd Speaker Evaluation">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp3Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 sp4e">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" placeholder="4th Speaker Evaluation">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="sp4Button">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 chairman">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" value="Chairman">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="chairmanButton">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 ahum">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" id="ahUm" value="Ah/Um Counter">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="ahUmButton">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control duration" placeholder="00:00:00">
                  </div>
                </div>
                <div class="row mb-3 grammarian">
                  <div class="col-md-4">
                    <input type="text" class="form-control name" id="grammarian" value="Grammarian">
                  </div>
                  <div class="col-md-2">
                    <div class="d-grid gap-2">
                      <button class="btn btn-success" type="button" id="grammarian">Start</button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control start-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control stop-time" placeholder="00:00:00">
                  </div>
                  <div class="col-md-2">
                    <input type="text" class="form-control" id="grammarianDuration" placeholder="00:00:00">
                  </div>
                </div>
              </form>
            </div>
            <div class="col">
              <button type="button" id="generateReportButton" class="btn btn-md btn-success">GENERATE REPORT</button>
              <hr>
              <div class="report card">
                <div class="card-body report-body">
                  
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script type="text/javascript">
        window.onload = () => {
         
          let generateReportButton = document.querySelector("#generateReportButton")

          setTimeNow = () => {
              var today = new Date();
              return (today.getHours() < 10 ? `0${today.getHours()}` : today.getHours()) + ":" + (today.getMinutes() < 10 ? `0${today.getMinutes()}` : today.getMinutes()) + ":" + (today.getSeconds() < 10 ? `0${today.getSeconds()}` : today.getSeconds());
            setTimeout(setTimeNow(), 1000);  
          }

          class SpeakerTimer {
            constructor(speaker) {
              
              this.nameInput = speaker.querySelector("input.name");
              this.startTimeInput = speaker.querySelector("input.start-time");
              this.stopTimeInput = speaker.querySelector("input.stop-time");
              this.durationInput = speaker.querySelector("input.duration");
              this.durationFormatted = '';
              this.startTimeFormatted = '';
              this.stopTimeFormatted = '';
              this.button = speaker.querySelector("button");
              this.sec = 0;
              this.min = 0;
              this.hr = 0;
              this.timerStart = false;

            }

            

            formatTime = (today, timerdisplay) => {
              if (timerdisplay) {
                return (today.getHours() < 10 ? `0${today.getHours()}` : today.getHours()) + ":" + (today.getMinutes() < 10 ? `0${today.getMinutes()}` : today.getMinutes()) + ":" + (today.getSeconds() < 10 ? `0${today.getSeconds()}` : today.getSeconds());
              } else {
                return (today.getHours() < 10 ? `0${today.getHours()}` : today.getHours()) + ":" + (today.getMinutes() < 10 ? `0${today.getMinutes()}` : today.getMinutes()) + ":" + (today.getSeconds() < 10 ? `0${today.getSeconds()}` : today.getSeconds());
              }
            }

            timer = () => {
              let sec = parseInt(this.sec);
              let min = parseInt(this.min);
              let hr = parseInt(this.hr);

              if (this.timerStart) {
                sec += 1
                if ( sec > 60 ) {
                  min += 1;
                  sec = 0;
                }

                if ( min > 60 ) {
                  min = 0;
                  sec = 0;
                  hr += 1;
                }
                setTimeout(this.timer, 1000);
              }
              this.hr = hr;
              this.min =  min < 10 ? `0${min}`: min;
              this.sec =  sec;
              this.durationInput.value = `${hr < 10 ? `0${hr}`: hr}:${min < 10 ? `0${min}`: min}:${sec < 10 ? `0${sec}`: sec}`;
              this.durationFormatted = `${hr ? `${hr} hours`: ''} ${min ? `${min} mins`: ''} ${sec ? `${sec} s`: ''}`;
            }

            buttonClickHandler = () => {
              // let time = this.setTimeNow();
              let time = new Date();
              
              if (this.timerStart) {
                  this.button.classList.add("btn-success");
                  this.button.classList.remove("btn-danger");
                  this.button.innerText = "Start";
                  this.stopTimeInput.value = this.formatTime(time, true);
                  this.stopTimeFormatted = this.formatTime(time);
                  this.timerStart = false;
                  this.timer();
                } else {
                  this.button.classList.remove("btn-success");
                  this.button.classList.add("btn-danger");
                  this.button.innerText = "Stop";
                  this.timerStart = true;
                  this.startTimeInput.value = this.formatTime(time, true);
                  this.timer();
                }
            }

            init = () => {
              this.button.addEventListener('click', this.buttonClickHandler)
            }
            
          }

          const MT = new SpeakerTimer(document.querySelector(".meeting"));
          const BUS = new SpeakerTimer(document.querySelector(".business"));
          const EDU = new SpeakerTimer(document.querySelector(".education"));
          const TTS = new SpeakerTimer(document.querySelector(".tableTopics"));
          const CHR = new SpeakerTimer(document.querySelector(".chairman"));
          const AHUM = new SpeakerTimer(document.querySelector(".ahum"));
          const GRA = new SpeakerTimer(document.querySelector(".grammarian"));
          const SP1 = new SpeakerTimer(document.querySelector(".sp1"));
          const SP2 = new SpeakerTimer(document.querySelector(".sp2"));
          const SP3 = new SpeakerTimer(document.querySelector(".sp3"));
          const SP4 = new SpeakerTimer(document.querySelector(".sp4"));
          const SP1E = new SpeakerTimer(document.querySelector(".sp1e"));
          const SP2E = new SpeakerTimer(document.querySelector(".sp2e"));
          const SP3E = new SpeakerTimer(document.querySelector(".sp3e"));
          const SP4E = new SpeakerTimer(document.querySelector(".sp4e"));

          MT.init();
          BUS.init();
          EDU.init();
          TTS.init();
          CHR.init();
          AHUM.init();
          GRA.init();
          SP1.init();
          SP2.init();
          SP3.init();
          SP4.init();
          SP1E.init();
          SP2E.init();
          SP3E.init();
          SP4E.init();
     
          generateReportButton.addEventListener('click', function() {
            let rbody = document.querySelector(".report-body");
            let today = new Date();
            let sup = '';
            switch (today.getDate()) {
              case 1:
                sup = 'st';
                break;
              case 2:
                sup = 'nd';
                break;
              case 3:
                sup = 'rd';
                break;
              default:
                sup = 'th';
            }

            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            let reportText = `
                  <h3>First Bahamas Branch of Toastmasters Club 1600</h3>
                  <h4>Timers Report - ${today.getDate()}<sup>${sup}</sup> ${monthNames[today.getMonth()]}, ${today.getFullYear()}</h4>
                  <p>The <strong>${MT.nameInput.value}</strong> was called to order at <strong>${MT.startTimeInput.value} pm</strong> and has been ongoing for <strong>${MT.durationFormatted}</strong></p>
                  <p>The <strong>${BUS.nameInput.value} Report</strong> began at <strong>${BUS.startTimeInput.value} pm</strong> and lasted for <strong>${BUS.durationFormatted}</strong></p>
                  <p>The <strong>${EDU.nameInput.value} Report</strong> began at <strong>${EDU.startTimeInput.value} pm</strong> and lasted for <strong>${EDU.durationFormatted}</strong></p>
                  <p>The <strong>${TTS.nameInput.value} Report</strong> began at <strong>${TTS.startTimeInput.value} pm</strong> and lasted for <strong>${TTS.durationFormatted}</strong></p>
                  <p>The 1<sup>st</sup> speaker <strong>${SP1.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">speech</span> began at <strong>${SP1.startTimeInput.value} pm</strong> and lasted <strong>${SP1.durationFormatted}</strong>.</p>
                  <p>The 2<sup>nd</sup> speaker <strong>${SP2.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">speech</span> began at <strong>${SP2.startTimeInput.value} pm</strong> and lasted <strong>${SP2.durationFormatted}</strong>.</p>
                  <p>The 3<sup>rd</sup> speaker <strong>${SP3.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">speech</span> began at <strong>${SP3.startTimeInput.value} pm</strong> and lasted <strong>${SP3.durationFormatted}</strong>.</p>
                  <p>The 4<sup>th</sup> speaker <strong>${SP4.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">speech</span> began at <strong>${SP4.startTimeInput.value} pm</strong> and lasted <strong>${SP4.durationFormatted}</strong>.</p>
                  <p>The 1<sup>st</sup> speaker <strong>${SP1E.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">evaluation</span> began at <strong>${SP1E.startTimeInput.value} pm</strong> and lasted <strong>${SP1E.durationFormatted}</strong>.</p>
                  <p>The 2<sup>nd</sup> speaker <strong>${SP2E.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">evaluation</span> began at <strong>${SP2E.startTimeInput.value} pm</strong> and lasted <strong>${SP2E.durationFormatted}</strong>.</p>
                  <p>The 3<sup>rd</sup> speaker <strong>${SP3E.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">evaluation</span> began at <strong>${SP3E.startTimeInput.value} pm</strong> and lasted <strong>${SP3E.durationFormatted}</strong>.</p>
                  <p>The 4<sup>th</sup> speaker <strong>${SP4E.nameInput.value}</strong> <span class="text-uppercase fw-bold text-success">evaluation</span> began at <strong>${SP4E.startTimeInput.value} pm</strong> and lasted <strong>${SP4E.durationFormatted}</strong>.</p>
                  <p>The <span class="text-uppercase fw-bold text-success">evaluation</span> of the <strong>${CHR.nameInput.value}</strong> began at <strong>${CHR.startTimeInput.value} pm</strong> and lasted <strong>${CHR.durationFormatted}</strong>.</p>
                  <p>The <strong>${AHUM.nameInput.value} Report</strong> began at <strong>${AHUM.startTimeInput.value} pm</strong> and lasted for <strong>${AHUM.durationFormatted}</strong></p>
                  <p>The <strong>${GRA.nameInput.value} Report</strong> began at <strong>${GRA.startTimeInput.value} pm</strong> and lasted for <strong>${GRA.durationFormatted}</strong></p>
                  <button class="btn btn-sm btn-success time-now" data-bs-toggle="modal" data-bs-target="#exampleModal">TIME NOW</button>
                  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <h1>${setTimeNow()}</h1>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
            `
            rbody.innerHTML = reportText;
          });

          
        }
    </script>
  </body>
</html>